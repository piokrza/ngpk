@if (dataset$ | async; as dataset) {
<div class="my-4 rounded widget">
  <div [class.pb-0]="dataset.data" class="flex justify-content-between align-items-center p-3">
    @if (dataset.data === null) {
    <div class="flex justify-content-center w-full">
      <p-button
        (onClick)="loadWeatherDataByCityName('KrakÃ³w')"
        [icon]="dataset.isLoading ? PrimeIcons.SPINNER : ''"
        [label]="'weather.fetchData' | translate" />
    </div>
    } @if (dataset.data?.name) {
    <p>
      {{ dataset.data?.name }} <small>({{ dataset.data?.sys?.country }})</small>
    </p>
    }
    <div class="flex align-items-center">
      @if (dataset.data?.main?.temp) {
      <span class="mr-2">{{ dataset.data?.main?.temp | number : '1.0-0' }} â„ƒ</span>
      } @if (dataset.data?.weather?.[0]?.icon; as icon) {
      <div class="w-3rem">
        <img [src]="icon | weatherIcon" alt="weather-icon" />
      </div>
      }
    </div>
  </div>

  @if (dataset.data !== null) {
  <div [class.widget__details--active]="isOpen" class="px-3 widget__details">
    <div class="flex gap-3 justify-content-between my-3">
      <ctrl-details
        [amount]="(dataset.data.main.humidity | number : '1.0-0') + '%'"
        [name]="'weather.humidity' | translate"
        icon="assets/img/weather-icons/humidity.png">
      </ctrl-details>

      <ctrl-details
        [amount]="(dataset.data.wind.speed | number : '1.0-0') + ' km/h'"
        [name]="'weather.wind' | translate"
        icon="assets/img/weather-icons/wind.png">
      </ctrl-details>
    </div>

    <div class="flex align-items-center justify-content-between">
      <input
        (keyup.enter)="loadWeatherDataByCityName(searchCityNameControl.value)"
        [formControl]="searchCityNameControl"
        [placeholder]="'weather.searchCity' | translate"
        type="text"
        class="w-full"
        pInputText />
      <p-button
        (onClick)="loadWeatherDataByCityName(searchCityNameControl.value)"
        [disabled]="!searchCityNameControl.value || dataset.isLoading"
        [icon]="PrimeIcons.SEARCH" />
    </div>
  </div>

  <small (click)="toggleDetails()" class="block text-center rounded widget__toggle">
    <i [class]="isOpen ? PrimeIcons.ANGLE_UP : PrimeIcons.ANGLE_DOWN" class="text-xs widget__toggle-icon"></i>
  </small>
  }
</div>
}
